#!/usr/bin/pdmenu

#Note that the above bang-path isn't required, but it lets you run this
#file directly as a sort of pdmenu script.
color:base:black:black
color:desktop:blue:black
#Define the main menu:
preproc: /loginvsi/menu/getversion

menu:main:Maintenance Menu
	exit:Logout
	exec:Reboot:sudo reboot
	nop
	exec:Change your password:p:/loginsvi/menu/changepassword
	preproc: /loginvsi/menu/gethostname
	show:Network Configuration::network_conf
	nop
	nop:Troubleshooting
	nop:--------------------------------------	
	exec:Start SSH server:pause:/etc/init.d/ssh start
	exec:Restart portainer:pause:docker restart portainer
	exec:Ping:edit,pause:clear;ping ~Address:~
	exec:Show netstat:display:netstat -tuna
	exec:Show LoginVSI service status:display:docker service ls -f name=VSI_
	exec:Restart LoginVSI services::docker restart $(docker ps -aqf name=VSI_)
	exec:Open bash shell::/bin/bash
	
		
menu:network_conf:Network Config
	exit:Back to main menu
	nop
	preproc: /loginvsi/menu/getnetworkadapters
	exec:Show Network interfaces:display:/sbin/ifconfig -a
	exec:Show Routes:display:/sbin/route -n
	exec:Add Default Gateway:edit,pause:clear;sudo /sbin/route add default gw ~Default Gateway:~
	exec:Add Route:edit,pause:clear;sudo /sbin/route add -net ~Destination:~ netmask ~Subnet:~ gw ~Gateway:~
	exec:Remove Default Gateway:edit,pause:clear;sudo /sbin/route del default gw ~Default Gateway:~
	exec:Remove Route:edit,pause:clear;sudo /sbin/route del -net ~Destination:~ netmask ~Subnet:~ gw ~Gateway:~
	nop

	

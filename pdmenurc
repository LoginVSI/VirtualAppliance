#!/usr/bin/pdmenu

#Note that the above bang-path isn't required, but it lets you run this
#file directly as a sort of pdmenu script.
color:base:black:black
color:desktop:blue:black
#Define the main menu:
preproc: /loginvsi/menu/getversion

menu:main:Maintenance Menu
	exit:Logout
	exec:Reboot::sudo reboot
	nop
	exec:Change your password:pause:/loginvsi/menu/changepassword
	preproc: /loginvsi/menu/gethostname
	exec:Regenerate self-signed certificates:pause:/loginvsi/menu/regeneratessl
	nop
	group:Network Configuration
	exec::makemenu: (\
		echo 'menu:network_conf:Network Configuration' ; \
		echo 'exit:Back to main menu' ; \
		echo 'nop' ; \
		echo 'exec:Show Network interfaces:display:/sbin/ifconfig -a' ; \
		echo "exec:Show Routes:display:/sbin/route -n" ; \
		echo 'nop' ; \
		echo 'preproc:/loginvsi/menu/getnetworkadapters' ; \
	)
	show:::network_conf
	remove:::network_conf
	endgroup


	show:Troubleshooting::troublshoot
	
menu:troublshoot:Troubleshooting
	exit:Back to main menu
	nop:--------------------------
	exec:Start SSH server:pause:/etc/init.d/ssh start
	exec:Stop SSH server:pause:/etc/init.d/ssh stop
	exec:Restart portainer:pause:docker restart portainer
	exec:Ping:edit,pause:clear;ping ~Address:~
	exec:Show netstat:display:netstat -tuna
	exec:Show LoginVSI service status:display:loginvsid status
	exec:Restart LoginVSI services:pause:loginvsid restart
	exec:Open bash shell::/bin/bash
	nop
		
